# 基于豆瓣网络爬虫的安卓端图书推荐系统  
>说明：本项目组的基于内容的推荐系统是为了解决新用户无法以基于用户记录的方式推荐图书的问题而研发的。基于内容的推荐系统，通过读取新用户在注册后选择的15个感兴趣的标签，连接数据库，将数据库内的相关标签的图书依据相关度和评分进行排序，以数组的形式返回推荐图书的id给位于服务器上的数据库，数据库根据推荐图书的id进行查找后，将相应书本推荐给新用户，最终显示在APP端的页面上，以便用户查阅。  


## 一、前言  
### 1.1 目的  
  为了保证项目团队按时保质地完成项目目标，便于项目团队成员更好地了解本软件系统开发项目情况，使软件系统开发工作开展的各个过程合理有序，因此以文件化的形式，把对于在软件系统开发生命周期内的工作任务范围、各项工作的任务分解、各团队成员的工作责任、团队内外沟通协作方式、开发进度、经费预算、项目内外环境条件、风险对策等内容做出安排，使项目成员和项目干系人了解项目开发计划书的作用、希望达到的效果，作为项目团队成员以及项目干系人之间的共识与约定，也是项目团队检查项目工作的依据。
总的来说，本文档是《基于豆瓣评论的科技图书推荐系统》的立项和执行的依据。  
### 1.2 背景  
  图书推荐是发展较早，发展范围较大的一个产业，在当前互联网上主要表现为各种电商平台的附庸，通过大量推广相关商品，以达到引导用户消费的目的，这也使得用户被推荐到的图书中存在大量类型相关，但内容评分低的书籍。这种用数量来弥补质量的推荐方式，对书籍销量有一定带动作用，但从长远看则对顾客的购书欲望有所抑制，对书籍的长期销售产生不可忽视的影响。
因此，推行基于豆瓣评论的图书推荐系统，优先推荐用户评分高的书籍，增加图书销量，已经是未来趋势，在网络建立起一个具有公信力和大数据评价的图书推荐体系已迫在眉睫。
本开发团队的短期目标是通过大数据建立起一个简易的图书推荐系统，长期战略是建立起以图书推荐系统为核心的网络图书销售生态圈。短期目标预计需要20人月的开发劳动力。  
### 1.3 定义  
  是一款根据用户对书籍左滑无感和右滑喜欢的操作行为，推荐用户感兴趣的科技类图书的App，用户可查看书籍的相关信息和词云评论，可对书籍进行收藏操作，可以发起话题讨论与其他读者私聊。  

## 二、项目概述  
### 2.1项目目标  
  该项目主要通过对豆瓣图书的评论和科技类图书相关信息进行爬取，然后将获得的数据经过清洗、转换、存放于分布式数据库，并通过读者评论分析和协同过滤算法，建立科技类图书的推荐模型，并基于Hadoop和Spark等框架，实现对图书类的推荐。  
### 2.2 项目工作内容  
#### 2.2.1 系统总体设计  
- **数据来源**  
  爬取豆瓣图书网站的书籍信息  
- **服务器**  
  租赁阿里云服务器  
- **数据库**  
  采用MongoDB数据库  
- **客户端**  
  APP作为数据展示  

## 三、项目团队组织  
### 3.1 组织结构  
![work1](https://github.com/AlexanderGuan/Andoird-Book-Recommand-spiderbased-on-Douban-Network-Spyder/blob/main/work1.JPG)
### 3.2 主要研发人员分工  
![work2](https://github.com/AlexanderGuan/Andoird-Book-Recommand-spiderbased-on-Douban-Network-Spyder/blob/main/work2.JPG)  

## 四、项目实施计划  
![work3](https://github.com/AlexanderGuan/Andoird-Book-Recommand-spiderbased-on-Douban-Network-Spyder/blob/main/work3.JPG)  

## 五、系统设计  
### 5.1 数据库设计  
![dp1](https://github.com/AlexanderGuan/Andoird-Book-Recommand-spiderbased-on-Douban-Network-Spyder/blob/main/dp1.jpg)  
![dp2](https://github.com/AlexanderGuan/Andoird-Book-Recommand-spiderbased-on-Douban-Network-Spyder/blob/main/dp2.jpg)  
![dp3](https://github.com/AlexanderGuan/Andoird-Book-Recommand-spiderbased-on-Douban-Network-Spyder/blob/main/dp3.jpg)  


### 5.2 网络设计  
  将连接APP连接服务器的方法进行封装，使用HttpUrlConnect网络请求，实现前后端数据的传送和接收。控件的生命周期短，所以使用多线程服务模型，用ExecutorService接口管理多线程，每收到一个请求开一个线程去处理，对每个客户都予以快速的响应不阻塞。主线程更新数据，子线程通过handler转接操作主线程ui。调用NetworkInfo方法用于判断当前手机的网络是否可用并且监控网络类型，判断是3G、4G或是wifi。  

### 5.3 安卓客户端设计  
  使用Android Studio软件进行开发，总体框架为四个Fragment布局，分别为'首页'，'消息'，'看看'，'我的'，其中首页包含注册登录界面、欢迎界面、书籍展示界面、内容详情界面、查看词云界面、查看评论界面、用户可以实现注册登录，滑动页面切换书籍、查看图书信息和收藏功能。'消息'界面为和好友聊天，可以发送消息。'看看'界面微展示话题界面，用户可以发起话题讨论，'我的'界面为各种属性设置界面，用户可以自定义设置，查看收藏图书等功能。app开发一共包含四十多个布局文件，六十多个java后端文件，四十余张背景、图标图片

### 5.4 爬虫设计  
  本项目组的豆瓣爬虫使用了bs4扩展库中的beautifulsoup方法和urllib.request方法。爬虫分为URL管理器、HTML伪装头、HTML解析器和数据存储器4个部分。URL管理器负责统一管理爬取页面的地址，从而减小工作量，并且使代码更加结构化、增强可读性。HTML伪装头负责将爬虫伪装为浏览器访问，其可以将爬虫伪装为来自Gecko或Chrome或Trident的访问，增强爬虫的隐蔽性。HTML解析器负责解析网页，抓取项目所需要的关键字，爬取书籍信息、出版社、价格、评分、图片链接、书本简介、作者简介、评论数、评论内容、标签等信息到本地的缓存中，再由数据存储器同一存储为txt文件。本爬虫通过在阿里云服务器以代理池的方式逃脱反爬虫技术，共爬取了800本书籍，共30000条信息。




